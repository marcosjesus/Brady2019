unit uFr_CadastroIQFCategoria;

interface

uses
  uUtils,
  Winapi.Windows, Winapi.Messages, System.SysUtils, System.Variants, System.Classes, Vcl.Graphics,
  Vcl.Controls, Vcl.Forms, Vcl.Dialogs, FireDAC.Stan.Intf, FireDAC.Stan.Option,
  FireDAC.Stan.Error, FireDAC.UI.Intf, FireDAC.Phys.Intf, FireDAC.Stan.Def,
  FireDAC.Stan.Pool, FireDAC.Stan.Async, FireDAC.Phys, FireDAC.Stan.Param,
  FireDAC.DatS, FireDAC.DApt.Intf, FireDAC.DApt, Data.DB, FireDAC.Comp.DataSet,
  FireDAC.Comp.Client, cxGraphics, cxControls, cxLookAndFeels,
  cxLookAndFeelPainters, cxStyles, dxSkinsCore, dxSkinOffice2013White,
  dxSkinscxPCPainter, cxCustomData, cxFilter, cxData, cxDataStorage, cxEdit,
  cxNavigator, cxDBData, cxContainer, cxGridCustomTableView, cxGridTableView,
  cxGridDBTableView, cxLabel, dxGDIPlusClasses, Vcl.ExtCtrls, cxGridLevel,
  cxClasses, cxGridCustomView, cxGrid;

type
  TFr_CadastroIQFCategoria = class(TForm)
    FDConnection: TFDConnection;
    FDQueryIQF_Categoria: TFDQuery;
    DataSourceCategoria: TDataSource;
    FDQueryIQF_CategoriaTIQF_Categoria_ID: TFDAutoIncField;
    FDQueryIQF_CategoriaTIQF_Categoria_Descricao: TStringField;
    cxGridIQF_Categoria: TcxGrid;
    cxTableViewIQF_Categoria: TcxGridDBTableView;
    cxGridLevelIQF_Categoria: TcxGridLevel;
    PanelSQLSplashScreen: TPanel;
    ImageSQLSplashScreen: TImage;
    cxLabelMensagem: TcxLabel;
    cxTableViewIQF_CategoriaTIQF_Categoria_ID: TcxGridDBColumn;
    cxTableViewIQF_CategoriaTIQF_Categoria_Descricao: TcxGridDBColumn;
  private
    procedure Mensagem(pMensagem: String);
    { Private declarations }
  public
    { Public declarations }
     procedure AbrirDataset;
  end;

var
  Fr_CadastroIQFCategoria: TFr_CadastroIQFCategoria;

implementation

{$R *.dfm}

{ TFr_CadastroIQFCategoria }

procedure TFr_CadastroIQFCategoria.AbrirDataset;
begin
  if not FDConnection.Connected then
  begin

    Mensagem( 'Abrindo conexão...' );
    try

      FDConnection.Params.LoadFromFile( MyDocumentsPath + '\DB.ini' );
      FDConnection.Open;

      Mensagem( 'Obtendo dados (IQF Categoria)...' );
      FDQueryIQF_Categoria.Open;

    finally

      Mensagem( EmptyStr );

    end;

  end;
end;

ure TFr_CadastroIQFCategoria.Mensagem(pMensagem: String);
begin

  cxLabelMensagem.Caption := pMensagem;
  PanelSQLSplashScreen.Visible := not pMensagem.IsEmpty;
  Update;
  Application.ProcessMessages;

end;

end.
